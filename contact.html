<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Booking Form</title>
  <!-- Bootstrap for styling alerts -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="p-4">

  <h2>Booking Form</h2>

  <!-- ✅ Netlify form -->
  <form id="ff" name="contact" method="POST" data-netlify="true" onsubmit="SubForm(event)">
    <!-- Hidden input is required for Netlify -->
    <input type="hidden" name="form-name" value="contact" />

    <div class="mb-3">
      <label for="name" class="form-label">Full Name</label>
      <input type="text" id="name" name="name" class="form-control" />
    </div>

    <div class="mb-3">
      <label for="number" class="form-label">Phone Number</label>
      <input type="text" id="number" name="number" class="form-control" />
    </div>

    <div class="mb-3">
      <label for="email" class="form-label">Email</label>
      <input type="email" id="email" name="email" class="form-control" />
    </div>

    <div class="mb-3">
      <label for="check-in-date" class="form-label">Check-in Date</label>
      <input type="date" id="check-in-date" name="check-in-date" class="form-control" />
    </div>

    <div class="mb-3">
      <label for="gender" class="form-label">Gender</label>
      <select id="gender" name="gender" class="form-select">
        <option value="">-- Select --</option>
        <option value="male">Male</option>
        <option value="female">Female</option>
      </select>
    </div>

    <button type="submit" class="btn btn-primary">Submit</button>

    <!-- Placeholder for messages -->
    <div id="form-message" class="mt-3"></div>
  </form>

  <script>
    // ✅ Basic validation
    function validateForm() {
      var name = document.getElementById("name").value.trim();
      var number = document.getElementById("number").value.trim();
      var email = document.getElementById("email").value.trim();
      var gender = document.getElementById("gender").value;

      if (!name || !number || !email || !gender) {
        alert("⚠️ Please fill in all fields.");
        return false;
      }

      if (!/\S+@\S+\.\S+/.test(email)) {
        alert("⚠️ Please enter a valid email address.");
        return false;
      }
      return true;
    }

    // ✅ Submit with fetch (AJAX)
    function SubForm(event) {
      event.preventDefault();
      if (!validateForm()) return false;

      const form = event.target;
      const formData = new FormData(form);

      fetch("/", {
        method: "POST",
        body: new URLSearchParams(formData).toString(),
        headers: { "Content-Type": "application/x-www-form-urlencoded" },
      })
      .then(() => {
        document.getElementById("form-message").innerHTML = `
          <div class="alert alert-success" role="alert">
            ✅ Booking was successful! We’ll contact you shortly.
          </div>
        `;
        form.reset();
      })
      .catch((error) => {
        document.getElementById("form-message").innerHTML = `
          <div class="alert alert-danger" role="alert">
            ❌ Something went wrong. Please try again.<br>
            <small>${error}</small>
          </div>
        `;
      });
    }
  </script>
</body>
</html>
